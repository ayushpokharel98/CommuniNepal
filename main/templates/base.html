{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
	<title>{% block title %}{% endblock title %} - CommuniNepal</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	{% tailwind_css %}
</head>

<body class="scroll-smooth bg-[#f0f2f5]">
	<header class="text-gray-600 body-font bg-blue-600">
		<div class="w-full flex flex-wrap p-5 flex-col md:flex-row items-center">
			<a class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0">
				<span class="ml-3 text-xl">CommuniNepal</span>
			</a>
			<nav class="flex flex-wrap items-center text-base justify-evenly mx-auto">
				<a class="mr-5 sm:mr-20 md:mr-30 lg:mr-40" href="/"><img src="{%static 'img/home-btn.png'%}" alt="" class="w-8"></a>
				<a class="mr-5 sm:mr-20 md:mr-30 lg:mr-40"><img src="{%static 'img/notification-btn.png'%}" alt=""
						class="w-8"></a>
				<a class="mr-5 sm:mr-20 md:mr-30 lg:mr-40" href="/createpost"><img src="{%static 'img/create_a_post.jpg'%}" class="w-8" alt=""></button></a>
				<div>
					<a class="search-button"><img src="{%static 'img/search-btn.png'%}" alt="" class="w-8"></a>
					<div class="search-bar hidden absolute">
						<input type="text" placeholder="Search"
							class="bg-gray-100 border-2 border-gray-300 rounded-md py-1 px-3 outline-none ml-[-1rem] w-32 sm:w-40">
						<button class="absolute right-0 top-0 mt-1 mr-2">
							<svg viewBox="0 -0.5 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" class="h-4 w-4"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>search_left [#1506]</title> <desc>Created with Sketch.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Dribbble-Light-Preview" transform="translate(-219.000000, -280.000000)" fill="#000000"> <g id="icons" transform="translate(56.000000, 160.000000)"> <path d="M184,138.586 L182.5153,140 L176.57545,134.343 L178.06015,132.929 L184,138.586 Z M170.35,132 C167.45515,132 165.1,129.757 165.1,127 C165.1,124.243 167.45515,122 170.35,122 C173.24485,122 175.6,124.243 175.6,127 C175.6,129.757 173.24485,132 170.35,132 L170.35,132 Z M170.35,120 C166.2907,120 163,123.134 163,127 C163,130.866 166.2907,134 170.35,134 C174.4093,134 177.7,130.866 177.7,127 C177.7,123.134 174.4093,120 170.35,120 L170.35,120 Z" id="search_left-[#1506]"> </path> </g> </g> </g> </g></svg>
						</button>
					</div>
				</div>
			</nav>
			<!-- Search bar code -->
			<div class="flex">
				<button
					class="user-button inline-flex items-center bg-gray-100 border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base mt-4 md:mt-0">{{user}}
					<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4">
						<g id="SVGRepo_bgCarrier" stroke-width="0"></g>
						<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
						<g id="SVGRepo_iconCarrier">
							<path fill-rule="evenodd" clip-rule="evenodd"
								d="M12 3C12.5523 3 13 3.44772 13 4V17.5858L18.2929 12.2929C18.6834 11.9024 19.3166 11.9024 19.7071 12.2929C20.0976 12.6834 20.0976 13.3166 19.7071 13.7071L12.7071 20.7071C12.3166 21.0976 11.6834 21.0976 11.2929 20.7071L4.29289 13.7071C3.90237 13.3166 3.90237 12.6834 4.29289 12.2929C4.68342 11.9024 5.31658 11.9024 5.70711 12.2929L11 17.5858V4C11 3.44772 11.4477 3 12 3Z"
								fill="#000000"></path>
						</g>
					</svg>
				</button>
				<div
					class="absolute w-36 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 hidden mt-12 md:mt-8 ml-[-3rem] dropdown">
					<div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="user-menu">
						<a href="/update"
							class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900"
							role="menuitem">Edit your profile</a>
						<a href="/handleLogout"
							class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900"
							role="menuitem">Logout</a>
					</div>
				</div>
			</div>
		</div>
	</header>


	<div id="createpostform"
		class="hidden w-full flex justify-center align-middle bg-black bg-opacity-60 h-full absolute">
		<form id="create-post-form" action="/create-post" method="post" enctype="multipart/form-data">
			<div class="mb-6">
				<label for="content" class="block mb-2 text-sm font-medium text-gray-900">Content</label>
				<textarea id="content"
					class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
					rows="4" placeholder="What's on your mind?" required></textarea>
			</div>
			<div class="mb-6">
				<label for="image" class="block mb-2 text-sm font-medium text-gray-900">Image</label>
				<input type="file" id="image"
					class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
					placeholder="Upload image" onchange="previewImage(event)">

			</div>
			<button type="submit"
				class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center">Create
				Post</button>
		</form>
	</div>
	{% for message in messages %}
	<div class="flex" id="message" style="width: 100%;">
		<div class="font-bold" style="width:99%;background-color:{{message.tags}};">{{ message }}</div>
		<div class="cross" style="background-color:{{message.tags}};"><button id="cross"
				class="bg-transparent">x</button>
		</div>
	</div>
	{%endfor%}
	{% block body %}{% endblock body %}
	<script src="{% static 'js/nav_logout.js' %}"></script>
	<script src="{%static 'js/messagebar.js'%}"></script>
	<script>
		function handleCreatePostClick() {
			// Check if the device is mobile
			if (window.innerWidth < 768) { // Adjust the breakpoint according to your needs
				// Redirect to the desired HTML file
				window.location.href = "path/to/another-html-file.html";
			} else {
				// Toggle visibility of the createpostform div for PC
				var createPostForm = document.getElementById("createpostform");
				createPostForm.classList.toggle("hidden");
			}
		}
		document.addEventListener('click', function (event) {
			var dropdown = document.querySelector('.dropdown');

			if (event.target.closest('.user-button')) {
				dropdown.classList.toggle('hidden');
			} else if (!event.target.closest('.dropdown')) {
				dropdown.classList.add('hidden');
			}
		});
		const searchButton = document.querySelector('.search-button');
		const searchBar = document.querySelector('.search-bar');

		searchButton.addEventListener('click', () => {
			searchBar.classList.toggle('hidden');
		});
	</script>
</body>

</html>